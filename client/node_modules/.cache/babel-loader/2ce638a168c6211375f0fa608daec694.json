{"ast":null,"code":"import _regeneratorRuntime from \"/Users/michaellegemah/Documents/GitHub/nasa-artemis-mission-control-dashboard/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/michaellegemah/Documents/GitHub/nasa-artemis-mission-control-dashboard/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/michaellegemah/Documents/GitHub/nasa-artemis-mission-control-dashboard/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { useCallback, useEffect, useState } from \"react\";\nimport { httpGetLaunches, httpSubmitLaunch, httpAbortLaunch } from './requests';\n\nfunction useLaunches(onSuccessSound, onAbortSound, onFailureSound) {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      launches = _useState2[0],\n      saveLaunches = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isPendingLaunch = _useState4[0],\n      setPendingLaunch = _useState4[1];\n\n  var getLaunches = useCallback( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var fetchedLaunches;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return httpGetLaunches();\n\n          case 2:\n            fetchedLaunches = _context.sent;\n            saveLaunches(fetchedLaunches);\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  })), []);\n  useEffect(function () {\n    getLaunches();\n  }, [getLaunches]);\n  var submitLaunch = useCallback( /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e) {\n      var data, launchDate, mission, rocket, target, response, success;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              e.preventDefault(); // setPendingLaunch(true);\n\n              data = new FormData(e.target);\n              launchDate = new Date(data.get(\"launch-day\"));\n              mission = data.get(\"mission-name\");\n              rocket = data.get(\"rocket-name\");\n              target = data.get(\"planets-selector\");\n              _context2.next = 8;\n              return httpSubmitLaunch({\n                launchDate: launchDate,\n                mission: mission,\n                rocket: rocket,\n                target: target\n              });\n\n            case 8:\n              response = _context2.sent;\n              // TODO: Set success based on response.\n              success = false;\n\n              if (success) {\n                getLaunches();\n                setTimeout(function () {\n                  setPendingLaunch(false);\n                  onSuccessSound();\n                }, 800);\n              } else {\n                onFailureSound();\n              }\n\n            case 11:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function (_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }(), [getLaunches, onSuccessSound, onFailureSound]);\n  var abortLaunch = useCallback( /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id) {\n      var response, success;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return httpAbortLaunch(id);\n\n            case 2:\n              response = _context3.sent;\n              // TODO: Set success based on response.\n              success = false;\n\n              if (success) {\n                getLaunches();\n                onAbortSound();\n              } else {\n                onFailureSound();\n              }\n\n            case 5:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function (_x2) {\n      return _ref3.apply(this, arguments);\n    };\n  }(), [getLaunches, onAbortSound, onFailureSound]);\n  return {\n    launches: launches,\n    isPendingLaunch: isPendingLaunch,\n    submitLaunch: submitLaunch,\n    abortLaunch: abortLaunch\n  };\n}\n\nexport default useLaunches;","map":{"version":3,"names":["useCallback","useEffect","useState","httpGetLaunches","httpSubmitLaunch","httpAbortLaunch","useLaunches","onSuccessSound","onAbortSound","onFailureSound","launches","saveLaunches","isPendingLaunch","setPendingLaunch","getLaunches","fetchedLaunches","submitLaunch","e","preventDefault","data","FormData","target","launchDate","Date","get","mission","rocket","response","success","setTimeout","abortLaunch","id"],"sources":["/Users/michaellegemah/Documents/GitHub/nasa-artemis-mission-control-dashboard/client/src/hooks/useLaunches.js"],"sourcesContent":["import { useCallback, useEffect, useState } from \"react\";\n\nimport {\n  httpGetLaunches,\n  httpSubmitLaunch,\n  httpAbortLaunch,\n} from './requests';\n\nfunction useLaunches(onSuccessSound, onAbortSound, onFailureSound) {\n  const [launches, saveLaunches] = useState([]);\n  const [isPendingLaunch, setPendingLaunch] = useState(false);\n\n  const getLaunches = useCallback(async () => {\n    const fetchedLaunches = await httpGetLaunches();\n    saveLaunches(fetchedLaunches);\n  }, []);\n\n  useEffect(() => {\n    getLaunches();\n  }, [getLaunches]);\n\n  const submitLaunch = useCallback(async (e) => {\n    e.preventDefault();\n    // setPendingLaunch(true);\n    const data = new FormData(e.target);\n    const launchDate = new Date(data.get(\"launch-day\"));\n    const mission = data.get(\"mission-name\");\n    const rocket = data.get(\"rocket-name\");\n    const target = data.get(\"planets-selector\");\n    const response = await httpSubmitLaunch({\n      launchDate,\n      mission,\n      rocket,\n      target,\n    });\n\n    // TODO: Set success based on response.\n    const success = false;\n    if (success) {\n      getLaunches();\n      setTimeout(() => {\n        setPendingLaunch(false);\n        onSuccessSound();\n      }, 800);\n    } else {\n      onFailureSound();\n    }\n  }, [getLaunches, onSuccessSound, onFailureSound]);\n\n  const abortLaunch = useCallback(async (id) => {\n    const response = await httpAbortLaunch(id);\n\n    // TODO: Set success based on response.\n    const success = false;\n    if (success) {\n      getLaunches();\n      onAbortSound();\n    } else {\n      onFailureSound();\n    }\n  }, [getLaunches, onAbortSound, onFailureSound]);\n\n  return {\n    launches,\n    isPendingLaunch,\n    submitLaunch,\n    abortLaunch,\n  };\n}\n\nexport default useLaunches;"],"mappings":";;;AAAA,SAASA,WAAT,EAAsBC,SAAtB,EAAiCC,QAAjC,QAAiD,OAAjD;AAEA,SACEC,eADF,EAEEC,gBAFF,EAGEC,eAHF,QAIO,YAJP;;AAMA,SAASC,WAAT,CAAqBC,cAArB,EAAqCC,YAArC,EAAmDC,cAAnD,EAAmE;EAAA,gBAChCP,QAAQ,CAAC,EAAD,CADwB;EAAA;EAAA,IAC1DQ,QAD0D;EAAA,IAChDC,YADgD;;EAAA,iBAErBT,QAAQ,CAAC,KAAD,CAFa;EAAA;EAAA,IAE1DU,eAF0D;EAAA,IAEzCC,gBAFyC;;EAIjE,IAAMC,WAAW,GAAGd,WAAW,wEAAC;IAAA;IAAA;MAAA;QAAA;UAAA;YAAA;YAAA,OACAG,eAAe,EADf;;UAAA;YACxBY,eADwB;YAE9BJ,YAAY,CAACI,eAAD,CAAZ;;UAF8B;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,CAAD,IAG5B,EAH4B,CAA/B;EAKAd,SAAS,CAAC,YAAM;IACda,WAAW;EACZ,CAFQ,EAEN,CAACA,WAAD,CAFM,CAAT;EAIA,IAAME,YAAY,GAAGhB,WAAW;IAAA,qEAAC,kBAAOiB,CAAP;MAAA;MAAA;QAAA;UAAA;YAAA;cAC/BA,CAAC,CAACC,cAAF,GAD+B,CAE/B;;cACMC,IAHyB,GAGlB,IAAIC,QAAJ,CAAaH,CAAC,CAACI,MAAf,CAHkB;cAIzBC,UAJyB,GAIZ,IAAIC,IAAJ,CAASJ,IAAI,CAACK,GAAL,CAAS,YAAT,CAAT,CAJY;cAKzBC,OALyB,GAKfN,IAAI,CAACK,GAAL,CAAS,cAAT,CALe;cAMzBE,MANyB,GAMhBP,IAAI,CAACK,GAAL,CAAS,aAAT,CANgB;cAOzBH,MAPyB,GAOhBF,IAAI,CAACK,GAAL,CAAS,kBAAT,CAPgB;cAAA;cAAA,OAQRpB,gBAAgB,CAAC;gBACtCkB,UAAU,EAAVA,UADsC;gBAEtCG,OAAO,EAAPA,OAFsC;gBAGtCC,MAAM,EAANA,MAHsC;gBAItCL,MAAM,EAANA;cAJsC,CAAD,CARR;;YAAA;cAQzBM,QARyB;cAe/B;cACMC,OAhByB,GAgBf,KAhBe;;cAiB/B,IAAIA,OAAJ,EAAa;gBACXd,WAAW;gBACXe,UAAU,CAAC,YAAM;kBACfhB,gBAAgB,CAAC,KAAD,CAAhB;kBACAN,cAAc;gBACf,CAHS,EAGP,GAHO,CAAV;cAID,CAND,MAMO;gBACLE,cAAc;cACf;;YAzB8B;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA,CAAD;;IAAA;MAAA;IAAA;EAAA,KA0B7B,CAACK,WAAD,EAAcP,cAAd,EAA8BE,cAA9B,CA1B6B,CAAhC;EA4BA,IAAMqB,WAAW,GAAG9B,WAAW;IAAA,qEAAC,kBAAO+B,EAAP;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;cAAA,OACP1B,eAAe,CAAC0B,EAAD,CADR;;YAAA;cACxBJ,QADwB;cAG9B;cACMC,OAJwB,GAId,KAJc;;cAK9B,IAAIA,OAAJ,EAAa;gBACXd,WAAW;gBACXN,YAAY;cACb,CAHD,MAGO;gBACLC,cAAc;cACf;;YAV6B;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA,CAAD;;IAAA;MAAA;IAAA;EAAA,KAW5B,CAACK,WAAD,EAAcN,YAAd,EAA4BC,cAA5B,CAX4B,CAA/B;EAaA,OAAO;IACLC,QAAQ,EAARA,QADK;IAELE,eAAe,EAAfA,eAFK;IAGLI,YAAY,EAAZA,YAHK;IAILc,WAAW,EAAXA;EAJK,CAAP;AAMD;;AAED,eAAexB,WAAf"},"metadata":{},"sourceType":"module"}